(()=>{"use strict";const e=window.React,t=window.wp.element;function n(){const[n,o]=(0,t.useState)(!!localStorage.getItem("GearLoginToken")),[a,l]=(0,t.useState)(!1),[r,i]=(0,t.useState)(""),[c,s]=(0,t.useState)(""),[d,u]=(0,t.useState)(JSON.parse(localStorage.getItem("GearLoginUser")||"null"));return(0,e.createElement)("div",null,!n&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("button",{onClick:()=>l(!0),className:"vara-login-button"},"Log in"),a&&(0,e.createElement)("div",{id:"loginModalOverlay",onClick:e=>{"loginModalOverlay"===e.target.id&&l(!1)},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998,display:"flex",justifyContent:"center",alignItems:"center"}},(0,e.createElement)("div",{style:{background:"white",padding:"20px",borderRadius:"8px",minWidth:"300px",zIndex:9999},onClick:e=>e.stopPropagation()},(0,e.createElement)("h2",null,"Login"),(0,e.createElement)("input",{type:"text",placeholder:"Usuario",value:r,onChange:e=>i(e.target.value),style:{width:"100%",marginBottom:"10px"}}),(0,e.createElement)("input",{type:"password",placeholder:"Contraseña",value:c,onChange:e=>s(e.target.value),style:{width:"100%",marginBottom:"10px"}}),(0,e.createElement)("button",{onClick:async()=>{const e=window.GearPluginSettings?.backendUrl;if(e)try{const t=await fetch(`${e}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:c}),credentials:"include"});console.log("response login:"),console.log(t);const n=await t.json();console.log("datalogin:"),console.log(n),u(n.user),o(!0),l(!1)}catch(e){alert("Error en login"),console.error(e)}else alert("Base backend url not set!")},style:{marginRight:"10px"}},"Entrar"),(0,e.createElement)("button",{onClick:()=>l(!1)},"Cancelar")))),n&&(0,e.createElement)("div",null,(0,e.createElement)("p",null,"Bienvenido ",d?.name||"Usuario","!"),(0,e.createElement)("p",null,"ID: ",d?.id),(0,e.createElement)("button",{onClick:()=>{o(!1),u(null)}},"Cerrar sesión")))}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".vara-login-root").forEach(o=>{(0,t.createRoot)(o).render((0,e.createElement)(n,null))})})})();