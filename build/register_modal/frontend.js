(()=>{"use strict";const e=window.React,t=window.wp.element;function n(){const[n,o]=(0,t.useState)(!1),[r,a]=(0,t.useState)(""),[l,i]=(0,t.useState)(""),[s,c]=(0,t.useState)(!1);return(0,e.createElement)("div",null,(0,e.createElement)("button",{onClick:()=>o(!0),className:"vara-login-button"},"Register"),n&&(0,e.createElement)("div",{id:"registerModalOverlay",onClick:e=>{"registerModalOverlay"===e.target.id&&o(!1)},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998,display:"flex",justifyContent:"center",alignItems:"center"}},(0,e.createElement)("div",{style:{background:"white",padding:"20px",borderRadius:"8px",minWidth:"300px",zIndex:9999},onClick:e=>e.stopPropagation()},(0,e.createElement)("h2",null,"Registro"),(0,e.createElement)("input",{type:"text",placeholder:"Usuario",value:r,onChange:e=>a(e.target.value),style:{width:"100%",marginBottom:"10px"}}),(0,e.createElement)("input",{type:"password",placeholder:"Contraseña",value:l,onChange:e=>i(e.target.value),style:{width:"100%",marginBottom:"10px"}}),(0,e.createElement)("button",{onClick:async()=>{const e=window.GearPluginSettings?.backendUrl;if(e)try{const t=await fetch(`${e}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:l}),credentials:"include"});console.log("response register:"),console.log(t);const n=await t.json();console.log("Respuesta del servidor:"),console.log(n),c(!0),o(!1)}catch(e){alert("Error en registro"),console.error(e)}else alert("Base backend url not set!")},style:{marginRight:"10px"}},"Registrarse"),(0,e.createElement)("button",{onClick:()=>o(!1)},"Cancelar"))),s&&(0,e.createElement)("p",{style:{marginTop:"10px",color:"green"}},"Registro exitoso. ¡Ahora puedes iniciar sesión!"))}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".vara-register-root").forEach((o=>{(0,t.createRoot)(o).render((0,e.createElement)(n,null))}))}))})();